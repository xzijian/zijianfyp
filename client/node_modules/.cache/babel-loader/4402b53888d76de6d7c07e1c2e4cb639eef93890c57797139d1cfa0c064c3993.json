{"ast":null,"code":"var _jsxFileName = \"/Users/Zijian/Desktop/fypfull/client/src/components/PostDetails.js\",\n  _s = $RefreshSig$();\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\nimport { useModulesContext } from '../hooks/useModulesContext';\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport { useParams } from 'react-router-dom';\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostDetails = _ref => {\n  _s();\n  let {\n    post\n  } = _ref;\n  const {\n    dispatch\n  } = useModulesContext();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    id\n  } = useParams();\n  const [comment, setComment] = useState('');\n  const [error, setError] = useState(null);\n  const handleClick = async () => {\n    if (!user) {\n      return;\n    }\n    const response = await fetch('http://localhost:3001/api/module/' + id + '/' + post._id, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (response.ok) {\n      dispatch({\n        type: 'DELETE_POST',\n        payload: json\n      });\n    }\n  };\n  const postComment = async () => {\n    if (!user) {\n      return;\n    }\n    const body = {\n      comment\n    };\n    const response = await fetch('http://localhost:3001/api/module/' + id + '/' + post._id, {\n      method: 'POST',\n      body: JSON.stringify(body),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setError(json.error);\n    }\n    if (response.ok) {\n      setComment('');\n      setError(null);\n      dispatch({\n        type: 'ADD_COMMENT',\n        payload: json\n      });\n    }\n  };\n  const comments1 = post.comments;\n  if (post.authoremail === user.email) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workout-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: post.post\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [post.author, \" \", \" - \", \" \", formatDistanceToNow(new Date(post.createdAt), {\n          addSuffix: true\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: post.comments && post.comments.map(comment => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [comment.cauthor, \" \", \" : \", \" \", comment.comment, \" \", ' - ', \" \", formatDistanceToNow(new Date(comment.createdAt), {\n            addSuffix: true\n          }), \" \"]\n        }, comment._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"material-symbols-outlined\",\n        onClick: handleClick,\n        children: \"delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setComment(e.target.value),\n        value: comment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: postComment,\n        children: \"post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workout-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: post.post\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post.author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), \" \", \" \", \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: formatDistanceToNow(new Date(post.createdAt), {\n          addSuffix: true\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: comments1.map(comment => {\n          /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [comment.cauthor, \" \", ' : ', \" \", comment.comment, \" \", ' - ', \" \", formatDistanceToNow(new Date(comment.createdAt), {\n              addSuffix: true\n            })]\n          }, comment._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setComment(e.target.value),\n        value: comment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: postComment,\n        children: \"post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n};\n_s(PostDetails, \"8b3OY4/VgB3COiiB3WNMgiUybBA=\", false, function () {\n  return [useModulesContext, useAuthContext, useParams];\n});\n_c = PostDetails;\nexport default PostDetails;\nvar _c;\n$RefreshReg$(_c, \"PostDetails\");","map":{"version":3,"names":["formatDistanceToNow","useModulesContext","useAuthContext","useParams","useState","jsxDEV","_jsxDEV","PostDetails","_ref","_s","post","dispatch","user","id","comment","setComment","error","setError","handleClick","response","fetch","_id","method","headers","token","json","ok","type","payload","postComment","body","JSON","stringify","comments1","comments","authoremail","email","className","children","fileName","_jsxFileName","lineNumber","columnNumber","author","Date","createdAt","addSuffix","map","cauthor","onClick","onChange","e","target","value","_c","$RefreshReg$"],"sources":["/Users/Zijian/Desktop/fypfull/client/src/components/PostDetails.js"],"sourcesContent":["import formatDistanceToNow from 'date-fns/formatDistanceToNow'\r\nimport { useModulesContext } from '../hooks/useModulesContext'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useState } from \"react\"\r\n\r\nconst PostDetails = ({ post }) => {\r\n  const { dispatch } = useModulesContext()\r\n  const { user } = useAuthContext()\r\n  const { id } = useParams()\r\n\r\n  const [comment, setComment] = useState('')\r\n  const [error, setError] = useState(null)\r\n\r\n  const handleClick = async () => {\r\n    if (!user) {\r\n      return\r\n    }\r\n    const response = await fetch('http://localhost:3001/api/module/' + id +'/' + post._id, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Authorization': `Bearer ${user.token}`\r\n      }\r\n    })\r\n    const json = await response.json()\r\n    if (response.ok) {  \r\n      dispatch({type: 'DELETE_POST', payload: json})\r\n    }\r\n  }\r\n\r\n  const postComment = async () => {\r\n    if (!user){\r\n      return\r\n    }\r\n    const body = {comment}\r\n    const response = await fetch('http://localhost:3001/api/module/' + id +'/' + post._id, {\r\n      method: 'POST',\r\n      body: JSON.stringify(body),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${user.token}`\r\n      }\r\n    })\r\n    const json = await response.json()\r\n    if (!response.ok) {\r\n      setError(json.error)\r\n    }\r\n    if (response.ok) {\r\n      setComment('')\r\n      setError(null)\r\n      dispatch({type: 'ADD_COMMENT', payload: json})\r\n    }\r\n  }\r\n  \r\n  const comments1 = post.comments\r\n\r\n  if (post.authoremail === user.email){\r\n    return (\r\n      <div className=\"workout-details\">\r\n        <p><strong>{post.post}</strong></p>\r\n        <p>{post.author} {\" - \"} {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true})}</p>\r\n        <div>\r\n            {post.comments && post.comments.map((comment) => (\r\n              <p key={comment._id}>{comment.cauthor} {\" : \"} {comment.comment} {' - '} {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true})} </p>\r\n            ))}\r\n        </div>\r\n        <span className=\"material-symbols-outlined\" onClick={handleClick}>delete</span>\r\n        <input \r\n          type=\"text\"\r\n          onChange={(e) => setComment(e.target.value)}\r\n          value={comment}\r\n      />\r\n      <button onClick={postComment}>post</button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n      </div>\r\n    )\r\n  }else{\r\n    return (\r\n      <div className=\"workout-details\">\r\n        <p><strong>{post.post}</strong></p>\r\n        <p>{post.author}</p> {\" \"} <p>{formatDistanceToNow(new Date(post.createdAt), { addSuffix: true})}</p>\r\n        <div>{comments1.map((comment)=>{\r\n          <p key={comment._id}>\r\n            {comment.cauthor} {' : '} {comment.comment} {' - '} {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true})}\r\n          </p>\r\n        })}</div>\r\n        <input \r\n          type=\"text\"\r\n          onChange={(e) => setComment(e.target.value)}\r\n          value={comment}\r\n      />\r\n      <button onClick={postComment}>post</button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PostDetails\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}