{"ast":null,"code":"var _jsxFileName = \"/Users/Zijian/Desktop/fypfull/client/src/pages/modules.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useModulesContext } from \"../hooks/useModulesContext\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport PostDetails from \"../components/PostDetails\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Module() {\n  _s();\n  const {\n    posts,\n    students,\n    dispatch\n  } = useModulesContext();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    id\n  } = useParams();\n  const [post, setPost] = useState('');\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchPosts();\n    }\n  }, [dispatch, user]);\n  const fetchPosts = async () => {\n    const response = await fetch('http://localhost:3001/api/module/' + id, {\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const response1 = await fetch('http://localhost:3001/api/modules/' + id, {\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    const json1 = await response1.json();\n    if (response.ok && response1.ok) {\n      const json2 = [json, json1];\n      dispatch({\n        type: 'SET_POSTS',\n        payload: json2\n      });\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      setError('You must be logged in');\n      return;\n    }\n    const post1 = {\n      post\n    };\n    const response = await fetch('http://localhost:3001/api/module/' + id, {\n      method: 'POST',\n      body: JSON.stringify(post1),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setError(json.error);\n      //setEmptyFields(json.emptyFields)\n    }\n\n    if (response.ok) {\n      setPost('');\n      setError(null);\n      //setEmptyFields([])\n      dispatch({\n        type: 'ADD_POST',\n        payload: json\n      });\n      fetchPosts();\n    }\n  };\n  console.log(posts);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      onChange: e => setPost(e.target.value),\n      value: post\n      //className={emptyFields.includes('name') ? 'error' : ''}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      children: \"Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workouts\",\n      children: posts && posts.map(post => /*#__PURE__*/_jsxDEV(PostDetails, {\n        post: post\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Students:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 12\n      }, this), students && students.map(students => /*#__PURE__*/_jsxDEV(\"p\", {\n        children: students\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 76\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 7\n  }, this);\n}\n_s(Module, \"cyHLROsdcV6gp922UkV0T7rmUiA=\", false, function () {\n  return [useModulesContext, useAuthContext, useParams];\n});\n_c = Module;\nvar _c;\n$RefreshReg$(_c, \"Module\");","map":{"version":3,"names":["useEffect","useState","useParams","useModulesContext","useAuthContext","PostDetails","jsxDEV","_jsxDEV","Module","_s","posts","students","dispatch","user","id","post","setPost","error","setError","fetchPosts","response","fetch","headers","token","response1","json","json1","ok","json2","type","payload","handleSubmit","e","preventDefault","post1","method","body","JSON","stringify","console","log","className","children","onChange","target","value","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","_id","_c","$RefreshReg$"],"sources":["/Users/Zijian/Desktop/fypfull/client/src/pages/modules.js"],"sourcesContent":["import { useEffect }from 'react'\r\nimport { useState } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { useModulesContext } from \"../hooks/useModulesContext\"\r\nimport { useAuthContext } from \"../hooks/useAuthContext\"\r\n\r\nimport PostDetails from \"../components/PostDetails\"\r\n\r\nexport function Module() {\r\n    const {posts, students, dispatch} = useModulesContext()\r\n    const {user} = useAuthContext()\r\n    const { id } = useParams()\r\n    \r\n    const [post, setPost] = useState('')\r\n    const [error, setError] = useState(null)\r\n\r\n    useEffect(() => {\r\n      if (user) {\r\n        fetchPosts()\r\n      }\r\n    }, [dispatch, user])\r\n\r\n    const fetchPosts = async () => {\r\n      const response = await fetch('http://localhost:3001/api/module/' + id, {\r\n        headers: {'Authorization': `Bearer ${user.token}`},\r\n      })\r\n      const response1 = await fetch('http://localhost:3001/api/modules/' + id, {\r\n        headers: {'Authorization': `Bearer ${user.token}`},\r\n      })\r\n      const json = await response.json()\r\n      const json1 = await response1.json()\r\n\r\n      if (response.ok && response1.ok) {\r\n        const json2 = [json, json1]\r\n        dispatch({type: 'SET_POSTS', payload: json2})\r\n      }\r\n    }\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault()\r\n  \r\n      if (!user) {\r\n        setError('You must be logged in')\r\n        return\r\n      }\r\n      const post1 = {post}\r\n      const response = await fetch('http://localhost:3001/api/module/' + id, {\r\n        method: 'POST',\r\n        body: JSON.stringify(post1),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${user.token}`\r\n        }\r\n      })\r\n      const json = await response.json()\r\n  \r\n      if (!response.ok) {\r\n        setError(json.error)\r\n        //setEmptyFields(json.emptyFields)\r\n      }\r\n      if (response.ok) {\r\n        setPost('')\r\n        setError(null)\r\n        //setEmptyFields([])\r\n        dispatch({type: 'ADD_POST', payload: json})\r\n        fetchPosts()\r\n      }\r\n    }\r\n    console.log(posts)\r\n    return (\r\n      <div className='home'>\r\n        <input \r\n          type=\"text\"\r\n          onChange={(e) => setPost(e.target.value)}\r\n          value={post}\r\n          //className={emptyFields.includes('name') ? 'error' : ''}\r\n      />\r\n      <button onClick={handleSubmit}>Post</button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n        <div className=\"workouts\">\r\n          {posts && posts.map((post) => (\r\n            <PostDetails key={post._id} post={post} />\r\n          ))}\r\n        </div>\r\n        <p><strong>Students:</strong>{students && students.map(students => <p>{students}</p>)}</p>\r\n      </div>\r\n    )\r\n}\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAO,OAAO;AAChC,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,iBAAiB,QAAQ,4BAA4B;AAC9D,SAASC,cAAc,QAAQ,yBAAyB;AAExD,OAAOC,WAAW,MAAM,2BAA2B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEnD,OAAO,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EACrB,MAAM;IAACC,KAAK;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,GAAGT,iBAAiB,EAAE;EACvD,MAAM;IAACU;EAAI,CAAC,GAAGT,cAAc,EAAE;EAC/B,MAAM;IAAEU;EAAG,CAAC,GAAGZ,SAAS,EAAE;EAE1B,MAAM,CAACa,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAExCD,SAAS,CAAC,MAAM;IACd,IAAIa,IAAI,EAAE;MACRM,UAAU,EAAE;IACd;EACF,CAAC,EAAE,CAACP,QAAQ,EAAEC,IAAI,CAAC,CAAC;EAEpB,MAAMM,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,GAAGP,EAAE,EAAE;MACrEQ,OAAO,EAAE;QAAC,eAAe,EAAG,UAAST,IAAI,CAACU,KAAM;MAAC;IACnD,CAAC,CAAC;IACF,MAAMC,SAAS,GAAG,MAAMH,KAAK,CAAC,oCAAoC,GAAGP,EAAE,EAAE;MACvEQ,OAAO,EAAE;QAAC,eAAe,EAAG,UAAST,IAAI,CAACU,KAAM;MAAC;IACnD,CAAC,CAAC;IACF,MAAME,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAI,EAAE;IAClC,MAAMC,KAAK,GAAG,MAAMF,SAAS,CAACC,IAAI,EAAE;IAEpC,IAAIL,QAAQ,CAACO,EAAE,IAAIH,SAAS,CAACG,EAAE,EAAE;MAC/B,MAAMC,KAAK,GAAG,CAACH,IAAI,EAAEC,KAAK,CAAC;MAC3Bd,QAAQ,CAAC;QAACiB,IAAI,EAAE,WAAW;QAAEC,OAAO,EAAEF;MAAK,CAAC,CAAC;IAC/C;EACF,CAAC;EAED,MAAMG,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAI,CAACpB,IAAI,EAAE;MACTK,QAAQ,CAAC,uBAAuB,CAAC;MACjC;IACF;IACA,MAAMgB,KAAK,GAAG;MAACnB;IAAI,CAAC;IACpB,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,GAAGP,EAAE,EAAE;MACrEqB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAAC;MAC3BZ,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAAST,IAAI,CAACU,KAAM;MACxC;IACF,CAAC,CAAC;IACF,MAAME,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAI,EAAE;IAElC,IAAI,CAACL,QAAQ,CAACO,EAAE,EAAE;MAChBT,QAAQ,CAACO,IAAI,CAACR,KAAK,CAAC;MACpB;IACF;;IACA,IAAIG,QAAQ,CAACO,EAAE,EAAE;MACfX,OAAO,CAAC,EAAE,CAAC;MACXE,QAAQ,CAAC,IAAI,CAAC;MACd;MACAN,QAAQ,CAAC;QAACiB,IAAI,EAAE,UAAU;QAAEC,OAAO,EAAEL;MAAI,CAAC,CAAC;MAC3CN,UAAU,EAAE;IACd;EACF,CAAC;EACDoB,OAAO,CAACC,GAAG,CAAC9B,KAAK,CAAC;EAClB,oBACEH,OAAA;IAAKkC,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACnBnC,OAAA;MACEsB,IAAI,EAAC,MAAM;MACXc,QAAQ,EAAGX,CAAC,IAAKhB,OAAO,CAACgB,CAAC,CAACY,MAAM,CAACC,KAAK,CAAE;MACzCA,KAAK,EAAE9B;MACP;IAAA;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACF,eACF1C,OAAA;MAAQ2C,OAAO,EAAEnB,YAAa;MAAAW,QAAA,EAAC;IAAI;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAS,EAC3ChC,KAAK,iBAAIV,OAAA;MAAKkC,SAAS,EAAC,OAAO;MAAAC,QAAA,EAAEzB;IAAK;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAO,eAC5C1C,OAAA;MAAKkC,SAAS,EAAC,UAAU;MAAAC,QAAA,EACtBhC,KAAK,IAAIA,KAAK,CAACyC,GAAG,CAAEpC,IAAI,iBACvBR,OAAA,CAACF,WAAW;QAAgBU,IAAI,EAAEA;MAAK,GAArBA,IAAI,CAACqC,GAAG;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAC3B;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACE,eACN1C,OAAA;MAAAmC,QAAA,gBAAGnC,OAAA;QAAAmC,QAAA,EAAQ;MAAS;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAS,EAACtC,QAAQ,IAAIA,QAAQ,CAACwC,GAAG,CAACxC,QAAQ,iBAAIJ,OAAA;QAAAmC,QAAA,EAAI/B;MAAQ;QAAAmC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACtF;AAEZ;AAACxC,EAAA,CA/EeD,MAAM;EAAA,QACkBL,iBAAiB,EACtCC,cAAc,EACdF,SAAS;AAAA;AAAAmD,EAAA,GAHZ7C,MAAM;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}